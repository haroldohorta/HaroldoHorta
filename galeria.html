<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>SUR DAO - Portafolio de Archivo</title>
    <style>
        body { background: #0a0a0a; color: #eee; font-family: 'Courier New', monospace; margin: 0; padding: 20px; }
        h1 { border-bottom: 1px solid #333; padding-bottom: 10px; font-size: 1.5rem; color: #888; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; padding-top: 20px; }
        .item { background: #151515; border: 1px solid #222; padding: 10px; transition: 0.3s; }
        .item:hover { border-color: #555; background: #1a1a1a; }
        img { width: 100%; height: 200px; object-fit: cover; filter: grayscale(30%); transition: 0.3s; cursor: pointer; }
        img:hover { filter: grayscale(0%); }
        .info { margin-top: 8px; font-size: 11px; color: #666; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    </style>
</head>
<body>
    <h1 id="titulo-galeria">Cargando Archivo...</h1>
    <div class="grid" id="grid-fotos"></div>

    <script>
        // Esta página lee los puntos del JSON que ya genera tu script
        async function cargarGaleria() {
            const params = new URLSearchParams(window.location.search);
            const zonaBusqueda = params.get('zona'); // Ej: "lota"
            
            if (!zonaBusqueda) {
                document.getElementById('titulo-galeria').innerText = "Error: No se especificó zona.";
                return;
            }

            document.getElementById('titulo-galeria').innerText = `EXPEDICIÓN: ${zonaBusqueda.toUpperCase()}`;

            const res = await fetch('puntos_mapa.json');
            const fotos = await res.json();

            const grid = document.getElementById('grid-fotos');
            // Filtramos solo las fotos que pertenecen a esa ruta o zona
            const filtradas = fotos.filter(f => f.thumb.toLowerCase().includes(zonaBusqueda.toLowerCase()));

            filtradas.forEach(f => {
                const div = document.createElement('div');
                div.className = 'item';
                div.innerHTML = `
                    <a href="${f.thumb}" target="_blank">
                        <img src="${f.thumb}">
                    </a>
                    <div class="info">${f.id}</div>
                `;
                grid.appendChild(div);
            });
        }
        cargarGaleria();
    </script>
</body>
</html>